<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a4bde1e6e3.js" crossorigin="anonymous"></script> 
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet"> 
    <title>Expense Manager</title> 
</head>
<body class="bg-dark">
    <div id="nav" class="mb-5"> </div>   
    <div class="d-flex justify-content-center  align-items-center bg-dark  text-white" style="height: 100%;width: 100%;">
        <div class="row shadow" style="height: 80%; width: 60%;">
            <div class="container">
                <div class="mt-5 p-5 bg-dark text-white rounded">
                    <h2 class=" d-flex justify-content-center display-1" style="font-family: 'Courgette', cursive">Income</h2>
                    <div class="mb-3 mt-3">
                        <label for="label">Label</label></label>
                        <input type="text" class="form-control" id="label" placeholder="label" name="label" >
                    </div>
                    <div class="mb-3">
                         <label for="amount">Amount</label>
                         <input type="number" class="form-control" id="amount" placeholder="amount" name="amount">
                    </div>
                    <div class="mb-3">
                        <label for="destription">Description</label>
                        <input type="text" class="form-control" id="destription" placeholder="destription" name="destription">
                   </div>
                   <br>
                   <div class="d-flex justify-content-center">
                       <button type="submit" class=" btn btn-light width:100px;" id="submit">Submit</button>
                   </div>
            </div> 
        </div>
    </div> 
</body> 

      <script src="./js/nav.js"> </script>
  <script>
      const BASE_URL="http://46.137.197.173:3000/"

      function apiCallPost(childUrl, param){
      $.ajax({
          url: BASE_URL+childUrl,
          type: 'POST',
          data: JSON.stringify(param),
          contentType: 'application/json; charset=utf-8',
          headers:{
                    authorization: "token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwiX2lkIjoiNjQzM2QwMGU4NmFhYmU1OGQ5ZGQ3NDkxIiwiaWF0IjoxNjgxMTE3ODgyfQ.ubjAROlmJB-jCDb9i6J1JQ9jYArihgKiOc_fsktXO48"
                },
          success: function (response) {
              alert(response);
          },
          error: function (error) {
              alert(error);
          }
        })
      } 
  
  
      $(document).ready(()=>{
          $("#submit").click(()=>{
            let param =incomeInfo();
              if(param) apiCallPost("income",param)    
              else  alert("Invalid Data")
          })
      })
  
      function incomeInfo(){
        let label = $("#label").val()
        if (!label){
          return null;
        }
        let amount = $("#amount").val()
        if (!amount){
          return null;
        }
        let destription = $("#destription").val()
        if (!destription){
          return null;
        }
        return {
            label,amount ,destription 
        }
    }
    </script>
</html>