<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a4bde1e6e3.js" crossorigin="anonymous"></script>
    <title>Category</title>
</head>

<body>
    <div id="nav"> </div>
    <div class="container">
        <div class="mt-4 p-5 rounded">
            <div class="container d-flex justify-content-center  align-items-center" style="height: 100vh;">
                <div class="col col-lg-6  bg-dark text-white p-4 rounded-3">
                    <h4 class="h1 text-center" style="font-family: 'Courgette', cursive;">Catagory</h4>
                    <div class="mb-2">
                        <label for="label" class="form-label">Label</label>
                        <input type="text" class="form-control" id="label" placeholder="Label">
                    </div>
                    <div class="mb-2">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" id="description" rows="2"></textarea>
                    </div>
                    <button id="sumbit" class="btn btn-primary my-3 rounded-1" style="width: 100%;">Sumbit</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    const BASE_URL = "http://46.137.197.173:3000/"

    function apiCallCategoryPost(childURL, param) {
        $.ajax({
            url: BASE_URL + childURL,
            type: 'POST',
            data: JSON.stringify(param),
            contentType: 'application/json; charset=utf-8',
            headers:{
                    authorization: "token eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Inl0aHl0aEBnbWFpbC5jb20iLCJfaWQiOiI2NDMzZGQ5OGFiMjgwYzU5MDAxN2I3MzEiLCJpYXQiOjE2ODExMjA4MTB9.PaZ9EwfRD1awBvAmIF73Ysyhqm292Tnh_LHVklkfUf0"
                },
            success: function (response) {
                alert(response.status);
            },
            error: function (error) {
                alert("error", error);
            }
        });
    }

    function categoryApi(param, cb) {
        apiCallCategoryPost("category", param)
    }

    $(document).ready(() => {
        $("#sumbit").click(() => {
            let param = getCategory()
            if (!param) {
                alert("Invaild Data")
            } else {
                categoryApi(param)
            }
        })
    })


    function getCategory() {
        let label = $("#label").val()
        if (!label) return null
        let description = $("#description").val()
        if (!description) return null
        return {
            label, description
        }
    }  
</script>
<script src="./js/nav.js"> </script>

</html>