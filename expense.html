<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/a4bde1e6e3.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courgette&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <title>Expense</title>
</head>
<body class="bgColor text-white">
    <div id="nav" style="margin-bottom: 70px;"> </div>   
      <div class="d-flex justify-content-center  align-items-center" style="height: 100%;width: 100%;">
          <div class="row shadow" style="height: 80%; width: 50%;">
              <div class="container">
                  <div class="p-5 rounded formColor">
                      <h1 class="d-flex justify-content-center" style="font-family: 'Courgette', cursive">Expense</h1>
                      <div class="mb-3 mt-3">
                          <label for="label" class="form-label">Label</label></label>
                          <input type="text" class="form-control" id="label" placeholder="label" name="label" >
                      </div>
                      <div class="mb-3">
                          <label for="amount" class="form-label">Amount</label>
                          <input type="number" class="form-control" id="amount" placeholder="amount" name="amount">
                      </div>
                      <div class="mb-3">
                          <label for="description" class="form-label">Description</label>
                          <input type="text" class="form-control" id="description" placeholder="Description" name="description">
                    </div>
                    <div class="mb-3">
                        <label for="category" class="form-label">Category</label>
                        <select class="form-select" id="category" aria-label="Default select example">
                            <option selected>Select Category</option>                          
                        </select>
                    </div>
                    <div class="d-flex justify-content-center">
                        <button id="sumbit" class="btn btn-primary my-3 rounded-1" style="width: 100%;">Sumbit</button>
                    </div>
              </div> 
          </div>
      </div> 

    
</body>
    <script src="./js/static.js"></script>
    <script src="./js/apiCall.js" ></script>
    <script src="./js/nav.js"> </script>
    <script>
        let data = categoryListApi()
            .then(data=>{
                generatCategoryList(data)
            })
            .catch(error=>{
                console.warn(error)
            })
    
        const generatCategoryList = (data= [{_id,label,}]) =>{
            data.map((row,index)=>{
                $(".form-select").append(`
                    <option value="${row._id}">${row.label}</option>
                `)
            })
        }

        function expenseApi(param, cb){
            postExpenseApi(param)
        }

        $(document).ready(() => {
            $("#sumbit").click(() => {    
                let param = getExpenseData()
                if (!param) {
                    alert("Invaild Expense Data")
                } else {
                    expenseApi(param)
                }         
            })
        })

        function getExpenseData(){
            let label = $("#label").val()
            if(!label) return null
            let amount = $("#amount").val()
            if(amount) {
                amount = parseInt(amount)
            }else {
                return null
            }
            let description = $("#description").val()
            if(!description) return null
            let category = $("#category").val()
            if(!category) return null         
            return {
                label,amount,description,category,
            }
        }

    </script>
</html>